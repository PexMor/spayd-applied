import{o as e,u as $,h as b,p as k,g as Z,a as me,b as te,d as he,c as M,e as ne,f as re,i as be,j as L,k as U,l as ge,m as pe,s as ve,n as fe,q as Ne,r as H,t as ye,v as R,w as Ae,x as xe,y as Se,z as V,L as Y,A as Ie,B as we,C as Be,I as Ce}from"./LanguageSwitcher-9953d2df.js";/*!
 * @license
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. *//**
 * Validation, extraction and creation of IBAN, BBAN, BIC/SWIFT numbers plus some other helpful stuff
 * @package Documentation
 * @author SaÅ¡a JovaniÄ‡
 * @module ibantools
 * @version 4.3.4
 * @license MPL-2.0
 * @preferred
 */function se(a,t){if(t===void 0&&(t={allowQRIBAN:!0}),a==null)return!1;var n=new RegExp("^[0-9]{2}$",""),r=a.slice(0,2),i=ie[r];return i===void 0||i.bban_regexp===void 0||i.bban_regexp===null||i.chars===void 0?!1:i.chars===a.length&&n.test(a.slice(2,4))&&_e(a.slice(4),r)&&Re(a)&&(t.allowQRIBAN||!$e(a))}var j;(function(a){a[a.NoIBANProvided=0]="NoIBANProvided",a[a.NoIBANCountry=1]="NoIBANCountry",a[a.WrongBBANLength=2]="WrongBBANLength",a[a.WrongBBANFormat=3]="WrongBBANFormat",a[a.ChecksumNotNumber=4]="ChecksumNotNumber",a[a.WrongIBANChecksum=5]="WrongIBANChecksum",a[a.WrongAccountBankBranchChecksum=6]="WrongAccountBankBranchChecksum",a[a.QRIBANNotAllowed=7]="QRIBANNotAllowed"})(j||(j={}));function _e(a,t){if(a==null||t===void 0||t===null)return!1;var n=ie[t];return n==null||n.bban_regexp===void 0||n.bban_regexp===null||n.chars===void 0||n.chars===null?!1:n.chars-4===a.length&&ke(a,n.bban_regexp)?n.bban_validation_func?n.bban_validation_func(a.replace(/[\s.]+/g,"")):!0:!1}function $e(a){if(a==null)return!1;var t=a.slice(0,2),n=["LI","CH"];if(!n.includes(t))return!1;var r=new RegExp("^3[0-1]{1}[0-9]{3}$","");return r.test(a.slice(4,9))}function ke(a,t){var n=new RegExp(t,"");return n.test(a)}function ce(a){return typeof a!="string"?null:a.replace(/[-\ ]/g,"").toUpperCase()}function le(a,t){if(typeof a!="string")return null;t==null&&(t=" ");var n=ce(a);return n===null?null:n.replace(/(.{4})(?!$)/g,"$1"+t)}function Re(a){var t=a.slice(0,2),n=parseInt(a.slice(2,4),10),r=a.slice(4),i=Pe("".concat(r).concat(t,"00")),s=z(i);return 98-s===n}function Pe(a){return a.split("").map(function(t){var n=t.charCodeAt(0);return n>=65?(n-55).toString():t}).join("")}var J;(function(a){a[a.NoBICProvided=0]="NoBICProvided",a[a.NoBICCountry=1]="NoBICCountry",a[a.WrongBICFormat=2]="WrongBICFormat"})(J||(J={}));var De=function(a){for(var t=[5,4,3,2,7,6,5,4,3,2],n=a.replace(/[\s.]+/g,""),r=parseInt(n.charAt(10),10),i=n.substring(0,10),s=0,m=0;m<10;m++)s+=parseInt(i.charAt(m),10)*t[m];var c=s%11;return r===(c===0?0:11-c)},Ee=function(a){var t=a.replace(/[\s.]+/g,""),n=parseInt(t.substring(0,t.length-2),10),r=parseInt(t.substring(t.length-2,t.length),10),i=n%97===0?97:n%97;return i===r},z=function(a){for(;a.length>2;){var t=a.slice(0,6),n=parseInt(t,10);if(isNaN(n))return NaN;a=n%97+a.slice(t.length)}return parseInt(a,10)%97},D=function(a){var t=a.replace(/[\s.]+/g,""),n=z(t);return n===1},Ze=function(a){for(var t=[3,9,7,1,3,9,7],n=parseInt(a.charAt(7),10),r=a.substring(0,7),i=0,s=0;s<7;s++)i+=parseInt(r.charAt(s),10)*t[s];var m=i%10;return n===(m===0?0:10-m)},Me=function(a){for(var t=[4,8,5,10,9,7,3,6],n=[1,2,4,8,5,10,9,7,3,6],r=parseInt(a.charAt(8),10),i=parseInt(a.charAt(9),10),s=a.substring(0,8),m=a.substring(10,20),c=0,o=0;o<8;o++)c+=parseInt(s.charAt(o),10)*t[o];var d=c%11;if(r!==(d===0?0:d===1?1:11-d))return!1;c=0;for(var o=0;o<10;o++)c+=parseInt(m.charAt(o),10)*n[o];return d=c%11,i===(d===0?0:d===1?1:11-d)},X=function(a,t){for(var n=10,r=0;r<a.length;r++)n+=parseInt(a.charAt(r),10),n%10!==0&&(n=n%10),n=n*2,n=n%11;return t===(11-n===10?0:11-n)},Fe=function(a){var t=parseInt(a.charAt(6),10),n=parseInt(a.charAt(16),10),r=a.substring(0,6),i=a.substring(7,16);return X(r,t)&&X(i,n)},ee=function(a){for(var t=[10,5,8,4,2,1],n=[6,3,7,9,10,5,8,4,2,1],r=parseInt(a.charAt(9),10),i=parseInt(a.charAt(19),10),s=a.substring(4,9),m=a.substring(10,19),c=0,o=0;o<s.length;o++)c+=parseInt(s.charAt(o),10)*t[o];var d=c%11;if(r!==(d===0?0:d===1?1:11-d))return!1;c=0;for(var o=0;o<m.length;o++)c+=parseInt(m.charAt(o),10)*n[o];return d=c%11,i===(d===0?0:d===1?1:11-d)},Ge=function(a){for(var t=[7,1,3,7,1,3,7,1,3,7,1,3,7],n=parseInt(a.charAt(15),10),r=a.substring(2,15),i=0,s=0;s<r.length;s++)i+=parseInt(r.charAt(s),10)*t[s];var m=i%10;return n===(m===0?0:10-m)},ae=function(a){for(var t=a.replace(/[\s.]+/g,""),n=Array.from(t),r=0;r<t.length;r++){var i=n[r].charCodeAt(0);if(i>=65)switch(i){case 65:case 74:n[r]="1";break;case 66:case 75:case 83:n[r]="2";break;case 67:case 76:case 84:n[r]="3";break;case 68:case 77:case 85:n[r]="4";break;case 69:case 78:case 86:n[r]="5";break;case 70:case 79:case 87:n[r]="6";break;case 71:case 80:case 88:n[r]="7";break;case 72:case 81:case 89:n[r]="8";break;case 73:case 82:case 90:n[r]="9";break}}var s=z(n.join(""));return s===0},Te=function(a){for(var t=[9,7,3,1,9,7,3,1,9,7,3,1,9,7,3],n=parseInt(a.charAt(7),10),r=a.substring(0,7),i=0,s=0;s<r.length;s++)i+=parseInt(r.charAt(s),10)*t[s];var m=i%10;if(n!==(m===0?0:10-m))return!1;if(i=0,a.endsWith("00000000")){for(var c=a.substring(8,15),o=parseInt(a.charAt(15),10),s=0;s<c.length;s++)i+=parseInt(c.charAt(s),10)*t[s];var d=i%10;return o===(d===0?0:10-d)}else{for(var c=a.substring(8,23),o=parseInt(a.charAt(23),10),s=0;s<c.length;s++)i+=parseInt(c.charAt(s),10)*t[s];var f=i%10;return o===(f===0?0:10-f)}},ie={AD:{chars:24,bban_regexp:"^[0-9]{8}[A-Z0-9]{12}$",IBANRegistry:!0,SEPA:!0},AE:{chars:23,bban_regexp:"^[0-9]{3}[0-9]{16}$",IBANRegistry:!0},AF:{},AG:{},AI:{},AL:{chars:28,bban_regexp:"^[0-9]{8}[A-Z0-9]{16}$",IBANRegistry:!0},AM:{},AO:{chars:25,bban_regexp:"^[0-9]{21}$"},AQ:{},AR:{},AS:{},AT:{chars:20,bban_regexp:"^[0-9]{16}$",IBANRegistry:!0,SEPA:!0},AU:{},AW:{},AX:{chars:18,bban_regexp:"^[0-9]{14}$",IBANRegistry:!0},AZ:{chars:28,bban_regexp:"^[A-Z]{4}[A-Z0-9]{20}$",IBANRegistry:!0},BA:{chars:20,bban_regexp:"^[0-9]{16}$",bban_validation_func:D,IBANRegistry:!0},BB:{},BD:{},BE:{chars:16,bban_regexp:"^[0-9]{12}$",bban_validation_func:Ee,IBANRegistry:!0,SEPA:!0},BF:{chars:28,bban_regexp:"^[A-Z0-9]{2}[0-9]{22}$"},BG:{chars:22,bban_regexp:"^[A-Z]{4}[0-9]{6}[A-Z0-9]{8}$",IBANRegistry:!0,SEPA:!0},BH:{chars:22,bban_regexp:"^[A-Z]{4}[A-Z0-9]{14}$",IBANRegistry:!0},BI:{chars:27,bban_regexp:"^[0-9]{23}$"},BJ:{chars:28,bban_regexp:"^[A-Z0-9]{2}[0-9]{22}$"},BL:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},BM:{},BN:{},BO:{},BQ:{},BR:{chars:29,bban_regexp:"^[0-9]{23}[A-Z]{1}[A-Z0-9]{1}$",IBANRegistry:!0},BS:{},BT:{},BV:{},BW:{},BY:{chars:28,bban_regexp:"^[A-Z]{4}[0-9]{4}[A-Z0-9]{16}$",IBANRegistry:!0},BZ:{},CA:{},CC:{},CD:{},CF:{chars:27,bban_regexp:"^[0-9]{23}$"},CG:{chars:27,bban_regexp:"^[0-9]{23}$"},CH:{chars:21,bban_regexp:"^[0-9]{5}[A-Z0-9]{12}$",IBANRegistry:!0,SEPA:!0},CI:{chars:28,bban_regexp:"^[A-Z]{1}[0-9]{23}$"},CK:{},CL:{},CM:{chars:27,bban_regexp:"^[0-9]{23}$"},CN:{},CO:{},CR:{chars:22,bban_regexp:"^[0-9]{18}$",IBANRegistry:!0},CU:{},CV:{chars:25,bban_regexp:"^[0-9]{21}$"},CW:{},CX:{},CY:{chars:28,bban_regexp:"^[0-9]{8}[A-Z0-9]{16}$",IBANRegistry:!0,SEPA:!0},CZ:{chars:24,bban_regexp:"^[0-9]{20}$",bban_validation_func:ee,IBANRegistry:!0,SEPA:!0},DE:{chars:22,bban_regexp:"^[0-9]{18}$",IBANRegistry:!0,SEPA:!0},DJ:{chars:27,bban_regexp:"^[0-9]{23}$"},DK:{chars:18,bban_regexp:"^[0-9]{14}$",IBANRegistry:!0,SEPA:!0},DM:{},DO:{chars:28,bban_regexp:"^[A-Z]{4}[0-9]{20}$",IBANRegistry:!0},DZ:{chars:26,bban_regexp:"^[0-9]{22}$"},EC:{},EE:{chars:20,bban_regexp:"^[0-9]{16}$",bban_validation_func:Ge,IBANRegistry:!0,SEPA:!0},EG:{chars:29,bban_regexp:"^[0-9]{25}",IBANRegistry:!0},EH:{},ER:{},ES:{chars:24,bban_validation_func:Me,bban_regexp:"^[0-9]{20}$",IBANRegistry:!0,SEPA:!0},ET:{},FI:{chars:18,bban_regexp:"^[0-9]{14}$",IBANRegistry:!0,SEPA:!0},FJ:{},FK:{chars:18,bban_regexp:"^[A-Z]{2}[0-9]{12}$"},FM:{},FO:{chars:18,bban_regexp:"^[0-9]{14}$",IBANRegistry:!0},FR:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",bban_validation_func:ae,IBANRegistry:!0,SEPA:!0},GA:{chars:27,bban_regexp:"^[0-9]{23}$"},GB:{chars:22,bban_regexp:"^[A-Z]{4}[0-9]{14}$",IBANRegistry:!0,SEPA:!0},GD:{},GE:{chars:22,bban_regexp:"^[A-Z0-9]{2}[0-9]{16}$",IBANRegistry:!0},GF:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},GG:{},GH:{},GI:{chars:23,bban_regexp:"^[A-Z]{4}[A-Z0-9]{15}$",IBANRegistry:!0,SEPA:!0},GL:{chars:18,bban_regexp:"^[0-9]{14}$",IBANRegistry:!0},GM:{},GN:{},GP:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},GQ:{chars:27,bban_regexp:"^[0-9]{23}$"},GR:{chars:27,bban_regexp:"^[0-9]{7}[A-Z0-9]{16}$",IBANRegistry:!0,SEPA:!0},GS:{},GT:{chars:28,bban_regexp:"^[A-Z0-9]{24}$",IBANRegistry:!0},GU:{},GW:{chars:25,bban_regexp:"^[A-Z]{2}[0-9]{19}$"},GY:{},HK:{},HM:{},HN:{chars:28,bban_regexp:"^[A-Z]{4}[0-9]{20}$"},HR:{chars:21,bban_regexp:"^[0-9]{17}$",bban_validation_func:Fe,IBANRegistry:!0,SEPA:!0},HT:{},HU:{chars:28,bban_regexp:"^[0-9]{24}$",bban_validation_func:Te,IBANRegistry:!0,SEPA:!0},ID:{},IE:{chars:22,bban_regexp:"^[A-Z0-9]{4}[0-9]{14}$",IBANRegistry:!0,SEPA:!0},IL:{chars:23,bban_regexp:"^[0-9]{19}$",IBANRegistry:!0},IM:{},IN:{},IO:{},IQ:{chars:23,bban_regexp:"^[A-Z]{4}[0-9]{15}$",IBANRegistry:!0},IR:{chars:26,bban_regexp:"^[0-9]{22}$"},IS:{chars:26,bban_regexp:"^[0-9]{22}$",IBANRegistry:!0,SEPA:!0},IT:{chars:27,bban_regexp:"^[A-Z]{1}[0-9]{10}[A-Z0-9]{12}$",IBANRegistry:!0,SEPA:!0},JE:{},JM:{},JO:{chars:30,bban_regexp:"^[A-Z]{4}[0-9]{4}[A-Z0-9]{18}$",IBANRegistry:!0},JP:{},KE:{},KG:{},KH:{},KI:{},KM:{chars:27,bban_regexp:"^[0-9]{23}$"},KN:{},KP:{},KR:{},KW:{chars:30,bban_regexp:"^[A-Z]{4}[A-Z0-9]{22}$",IBANRegistry:!0},KY:{},KZ:{chars:20,bban_regexp:"^[0-9]{3}[A-Z0-9]{13}$",IBANRegistry:!0},LA:{},LB:{chars:28,bban_regexp:"^[0-9]{4}[A-Z0-9]{20}$",IBANRegistry:!0},LC:{chars:32,bban_regexp:"^[A-Z]{4}[A-Z0-9]{24}$",IBANRegistry:!0},LI:{chars:21,bban_regexp:"^[0-9]{5}[A-Z0-9]{12}$",IBANRegistry:!0,SEPA:!0},LK:{},LR:{},LS:{},LT:{chars:20,bban_regexp:"^[0-9]{16}$",IBANRegistry:!0,SEPA:!0},LU:{chars:20,bban_regexp:"^[0-9]{3}[A-Z0-9]{13}$",IBANRegistry:!0,SEPA:!0},LV:{chars:21,bban_regexp:"^[A-Z]{4}[A-Z0-9]{13}$",IBANRegistry:!0,SEPA:!0},LY:{chars:25,bban_regexp:"^[0-9]{21}$",IBANRegistry:!0},MA:{chars:28,bban_regexp:"^[0-9]{24}$"},MC:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",bban_validation_func:ae,IBANRegistry:!0,SEPA:!0},MD:{chars:24,bban_regexp:"^[A-Z0-9]{2}[A-Z0-9]{18}$",IBANRegistry:!0},ME:{chars:22,bban_regexp:"^[0-9]{18}$",bban_validation_func:D,IBANRegistry:!0},MF:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},MG:{chars:27,bban_regexp:"^[0-9]{23}$"},MH:{},MK:{chars:19,bban_regexp:"^[0-9]{3}[A-Z0-9]{10}[0-9]{2}$",bban_validation_func:D,IBANRegistry:!0},ML:{chars:28,bban_regexp:"^[A-Z0-9]{2}[0-9]{22}$"},MM:{},MN:{chars:20,bban_regexp:"^[0-9]{16}$"},MO:{},MP:{},MQ:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},MR:{chars:27,bban_regexp:"^[0-9]{23}$",IBANRegistry:!0},MS:{},MT:{chars:31,bban_regexp:"^[A-Z]{4}[0-9]{5}[A-Z0-9]{18}$",IBANRegistry:!0,SEPA:!0},MU:{chars:30,bban_regexp:"^[A-Z]{4}[0-9]{19}[A-Z]{3}$",IBANRegistry:!0},MV:{},MW:{},MX:{},MY:{},MZ:{chars:25,bban_regexp:"^[0-9]{21}$"},NA:{},NC:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},NE:{chars:28,bban_regexp:"^[A-Z]{2}[0-9]{22}$"},NF:{},NG:{},NI:{chars:28,bban_regexp:"^[A-Z]{4}[0-9]{20}$"},NL:{chars:18,bban_regexp:"^[A-Z]{4}[0-9]{10}$",IBANRegistry:!0,SEPA:!0},NO:{chars:15,bban_regexp:"^[0-9]{11}$",bban_validation_func:De,IBANRegistry:!0,SEPA:!0},NP:{},NR:{},NU:{},NZ:{},OM:{},PA:{},PE:{},PF:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},PG:{},PH:{},PK:{chars:24,bban_regexp:"^[A-Z0-9]{4}[0-9]{16}$",IBANRegistry:!0},PL:{chars:28,bban_validation_func:Ze,bban_regexp:"^[0-9]{24}$",IBANRegistry:!0,SEPA:!0},PM:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},PN:{},PR:{},PS:{chars:29,bban_regexp:"^[A-Z0-9]{4}[0-9]{21}$",IBANRegistry:!0},PT:{chars:25,bban_regexp:"^[0-9]{21}$",bban_validation_func:D,IBANRegistry:!0,SEPA:!0},PW:{},PY:{},QA:{chars:29,bban_regexp:"^[A-Z]{4}[A-Z0-9]{21}$",IBANRegistry:!0},RE:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},RO:{chars:24,bban_regexp:"^[A-Z]{4}[A-Z0-9]{16}$",IBANRegistry:!0,SEPA:!0},RS:{chars:22,bban_regexp:"^[0-9]{18}$",bban_validation_func:D,IBANRegistry:!0},RU:{chars:33,bban_regexp:"^[0-9]{14}[A-Z0-9]{15}$",IBANRegistry:!0},RW:{},SA:{chars:24,bban_regexp:"^[0-9]{2}[A-Z0-9]{18}$",IBANRegistry:!0},SB:{},SC:{chars:31,bban_regexp:"^[A-Z]{4}[0-9]{20}[A-Z]{3}$",IBANRegistry:!0},SD:{chars:18,bban_regexp:"^[0-9]{14}$",IBANRegistry:!0},SE:{chars:24,bban_regexp:"^[0-9]{20}$",IBANRegistry:!0,SEPA:!0},SG:{},SH:{},SI:{chars:19,bban_regexp:"^[0-9]{15}$",bban_validation_func:D,IBANRegistry:!0,SEPA:!0},SJ:{},SK:{chars:24,bban_regexp:"^[0-9]{20}$",bban_validation_func:ee,IBANRegistry:!0,SEPA:!0},SL:{},SM:{chars:27,bban_regexp:"^[A-Z]{1}[0-9]{10}[A-Z0-9]{12}$",IBANRegistry:!0,SEPA:!0},SN:{chars:28,bban_regexp:"^[A-Z]{2}[0-9]{22}$"},SO:{chars:23,bban_regexp:"^[0-9]{19}$",IBANRegistry:!0},SR:{},SS:{},ST:{chars:25,bban_regexp:"^[0-9]{21}$",IBANRegistry:!0},SV:{chars:28,bban_regexp:"^[A-Z]{4}[0-9]{20}$",IBANRegistry:!0},SX:{},SY:{},SZ:{},TC:{},TD:{chars:27,bban_regexp:"^[0-9]{23}$"},TF:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},TG:{chars:28,bban_regexp:"^[A-Z]{2}[0-9]{22}$"},TH:{},TJ:{},TK:{},TL:{chars:23,bban_regexp:"^[0-9]{19}$",IBANRegistry:!0},TM:{},TN:{chars:24,bban_regexp:"^[0-9]{20}$",IBANRegistry:!0},TO:{},TR:{chars:26,bban_regexp:"^[0-9]{5}[A-Z0-9]{17}$",IBANRegistry:!0},TT:{},TV:{},TW:{},TZ:{},UA:{chars:29,bban_regexp:"^[0-9]{6}[A-Z0-9]{19}$",IBANRegistry:!0},UG:{},UM:{},US:{},UY:{},UZ:{},VA:{chars:22,bban_regexp:"^[0-9]{18}",IBANRegistry:!0,SEPA:!0},VC:{},VE:{},VG:{chars:24,bban_regexp:"^[A-Z0-9]{4}[0-9]{16}$",IBANRegistry:!0},VI:{},VN:{},VU:{},WF:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},WS:{},XK:{chars:20,bban_regexp:"^[0-9]{16}$",IBANRegistry:!0},YE:{},YT:{chars:27,bban_regexp:"^[0-9]{10}[A-Z0-9]{11}[0-9]{2}$",IBANRegistry:!0},ZA:{},ZM:{},ZW:{}};function oe({message:a,onConfirm:t,onCancel:n}){return e("div",{className:"dialog-overlay",onClick:n,children:e("div",{className:"dialog-container",onClick:r=>r.stopPropagation(),children:[e("div",{className:"dialog-icon warning",children:"âš ï¸"}),e("div",{className:"dialog-message",children:a}),e("div",{className:"dialog-actions",children:[e("button",{className:"btn btn-secondary",onClick:n,children:"Cancel"}),e("button",{className:"btn btn-danger",onClick:t,autoFocus:!0,children:"Delete"})]})]})})}function de({message:a,onClose:t}){return e("div",{className:"dialog-overlay",onClick:t,children:e("div",{className:"dialog-container",onClick:n=>n.stopPropagation(),children:[e("div",{className:"dialog-icon info",children:"â„¹ï¸"}),e("div",{className:"dialog-message",children:a}),e("div",{className:"dialog-actions",children:e("button",{className:"btn btn-primary",onClick:t,autoFocus:!0,children:"OK"})})]})})}function ue({title:a,children:t,onClose:n}){return e("div",{className:"dialog-overlay",onClick:n,children:e("div",{className:"dialog-container modal-container",onClick:r=>r.stopPropagation(),children:[e("div",{className:"modal-header",children:[e("h3",{children:a}),e("button",{className:"close-button",onClick:n,children:"Ã—"})]}),e("div",{className:"modal-content",children:t})]})})}function Ue(){const{t:a}=$(),[t,n]=b([]),[r,i]=b(!1),[s,m]=b(null),[c,o]=b({name:"",iban:"",currency:"CZK",isDefault:!1}),[d,f]=b(""),[p,v]=b(null);k(()=>{y()},[]);async function y(){const l=await Z();n(l)}function S(l){l?(m(l),o({name:l.name,iban:l.iban,currency:l.currency,isDefault:l.isDefault})):(m(null),o({name:"",iban:"",currency:"CZK",isDefault:t.length===0})),f(""),i(!0)}function N(){i(!1),m(null),f("")}async function g(l){if(l.preventDefault(),f(""),!se(c.iban)){f(a.invalidIban);return}try{const I={...c,updatedAt:Date.now(),createdAt:(s==null?void 0:s.createdAt)||Date.now()};s?await me({...I,id:s.id}):await te(I),await y(),N()}catch(I){f(I instanceof Error?I.message:a.failedToCreateAccount)}}function u(l){l.id&&v({account:l})}async function w(){p!=null&&p.account.id&&(await he(p.account.id),await y(),v(null))}return e("div",{className:"fade-in",children:[e("div",{className:"flex justify-between items-center mb-lg",children:[e("h2",{children:a.accounts}),e("button",{className:"btn btn-primary",onClick:()=>S(),children:a.addAccount})]}),t.length===0?e("div",{className:"empty-state",children:[e("div",{className:"empty-state-icon",children:"ðŸ¦"}),e("h3",{children:a.noAccountsYet}),e("p",{children:a.noAccountsMessage})]}):e("div",{className:"grid grid-2",children:t.map(l=>e("div",{className:"card",children:[e("div",{className:"flex justify-between items-center mb-md",children:[e("h3",{className:"text-lg",children:l.name}),l.isDefault&&e("span",{className:"badge badge-acked",children:a.default})]}),e("div",{className:"mb-sm",children:[e("div",{className:"text-sm text-secondary",children:a.iban}),e("div",{className:"font-mono text-sm",children:le(l.iban)||l.iban})]}),e("div",{className:"mb-sm",children:[e("div",{className:"text-sm text-secondary",children:a.currency}),e("div",{className:"text-sm",children:l.currency})]}),e("div",{className:"flex gap-sm mt-md",children:[e("button",{className:"btn btn-secondary btn-sm",onClick:()=>S(l),children:a.edit}),e("button",{className:"btn btn-danger btn-sm",onClick:()=>u(l),children:a.delete})]})]},l.id))}),r&&e("div",{className:"modal-overlay",onClick:N,children:e("div",{className:"modal",onClick:l=>l.stopPropagation(),children:[e("div",{className:"modal-header",children:[e("h2",{className:"modal-title",children:s?a.editAccount:a.addAccount.replace("+ ","")}),e("button",{className:"modal-close",onClick:N,children:"Ã—"})]}),e("form",{onSubmit:g,children:[e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.accountName}),e("input",{type:"text",value:c.name,onInput:l=>o({...c,name:l.target.value}),placeholder:a.accountNamePlaceholder,required:!0})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.iban}),e("input",{type:"text",value:c.iban,onInput:l=>o({...c,iban:l.target.value}),placeholder:a.ibanPlaceholder,required:!0}),e("div",{className:"form-help",children:a.ibanHelp})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.currency}),e("select",{value:c.currency,onChange:l=>o({...c,currency:l.target.value}),children:[e("option",{value:"CZK",children:"CZK"}),e("option",{value:"EUR",children:"EUR"}),e("option",{value:"USD",children:"USD"})]})]}),e("div",{className:"form-group",children:e("label",{className:"flex items-center gap-sm",children:[e("input",{type:"checkbox",checked:c.isDefault,onChange:l=>o({...c,isDefault:l.target.checked})}),e("span",{className:"form-label",style:{marginBottom:0},children:a.setAsDefault})]})}),d&&e("div",{className:"form-error mb-md",children:d}),e("div",{className:"flex gap-sm justify-between",children:[e("button",{type:"button",className:"btn btn-secondary",onClick:N,children:a.cancel}),e("button",{type:"submit",className:"btn btn-primary",children:[s?a.update:a.create," ",a.account]})]})]})]})}),p&&e(oe,{message:`${a.deleteAccountConfirm} "${p.account.name}"?`,onConfirm:w,onCancel:()=>v(null)})]})}function Le(){const{t:a}=$(),[t,n]=b([]),[r,i]=b(!1),[s,m]=b(null),[c,o]=b({name:"",staticSymbol:"",vsMode:"counter",vsCounter:1,vsStaticValue:"",permanentAmount:"",message:"",isDefault:!1}),[d,f]=b(null);k(()=>{p()},[]);async function p(){const u=await M();n(u)}function v(u){var w;u?(m(u),o({name:u.name,staticSymbol:u.staticSymbol,vsMode:u.vsMode,vsCounter:u.vsCounter,vsStaticValue:u.vsStaticValue||"",permanentAmount:((w=u.permanentAmount)==null?void 0:w.toString())||"",message:u.message||"",isDefault:u.isDefault})):(m(null),o({name:"",staticSymbol:"",vsMode:"counter",vsCounter:1,vsStaticValue:"",permanentAmount:"",message:"",isDefault:t.length===0})),i(!0)}function y(){i(!1),m(null)}async function S(u){u.preventDefault();const w={...c,permanentAmount:c.permanentAmount?parseFloat(c.permanentAmount):void 0,message:c.message||void 0,updatedAt:Date.now(),createdAt:(s==null?void 0:s.createdAt)||Date.now()};s?await ne({...w,id:s.id}):await re(w),await p(),y()}function N(u){u.id&&f({event:u})}async function g(){d!=null&&d.event.id&&(await be(d.event.id),await p(),f(null))}return e("div",{className:"fade-in",children:[e("div",{className:"flex justify-between items-center mb-lg",children:[e("h2",{children:a.events}),e("button",{className:"btn btn-primary",onClick:()=>v(),children:a.addEvent})]}),t.length===0?e("div",{className:"empty-state",children:[e("div",{className:"empty-state-icon",children:"ðŸ“…"}),e("h3",{children:a.noEventsYet}),e("p",{children:a.noEventsMessage})]}):e("div",{className:"grid grid-2",children:t.map(u=>e("div",{className:"card",children:[e("div",{className:"flex justify-between items-center mb-md",children:[e("h3",{className:"text-lg",children:u.name}),u.isDefault&&e("span",{className:"badge badge-acked",children:a.default})]}),e("div",{className:"mb-sm",children:[e("div",{className:"text-sm text-secondary",children:a.staticSymbol}),e("div",{className:"font-mono text-sm",children:u.staticSymbol})]}),e("div",{className:"mb-sm",children:[e("div",{className:"text-sm text-secondary",children:a.vsGenerationMode}),e("div",{className:"text-sm",children:[u.vsMode==="counter"&&`${a.counterCurrent}${u.vsCounter})`,u.vsMode==="time"&&a.timeBasedYMDHMS,u.vsMode==="static"&&`${a.staticValue}${u.vsStaticValue})`]})]}),u.permanentAmount&&e("div",{className:"mb-sm",children:[e("div",{className:"text-sm text-secondary",children:a.permanentAmount}),e("div",{className:"text-sm font-semibold",children:[u.permanentAmount," CZK"]})]}),u.message&&e("div",{className:"mb-sm",children:[e("div",{className:"text-sm text-secondary",children:a.message}),e("div",{className:"text-sm",children:u.message})]}),e("div",{className:"flex gap-sm mt-md",children:[e("button",{className:"btn btn-secondary btn-sm",onClick:()=>v(u),children:a.edit}),e("button",{className:"btn btn-danger btn-sm",onClick:()=>N(u),children:a.delete})]})]},u.id))}),r&&e("div",{className:"modal-overlay",onClick:y,children:e("div",{className:"modal",onClick:u=>u.stopPropagation(),children:[e("div",{className:"modal-header",children:[e("h2",{className:"modal-title",children:s?a.editEvent:a.addEvent.replace("+ ","")}),e("button",{className:"modal-close",onClick:y,children:"Ã—"})]}),e("form",{onSubmit:S,children:[e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.eventName}),e("input",{type:"text",value:c.name,onInput:u=>o({...c,name:u.target.value}),placeholder:a.eventNamePlaceholder,required:!0})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.staticSymbol}),e("input",{type:"text",value:c.staticSymbol,onInput:u=>o({...c,staticSymbol:u.target.value}),placeholder:a.staticSymbolPlaceholder,required:!0}),e("div",{className:"form-help",children:a.staticSymbolHelp1to4})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.variableSymbolMode}),e("select",{value:c.vsMode,onChange:u=>o({...c,vsMode:u.target.value}),children:[e("option",{value:"counter",children:a.vsModeCounterDesc}),e("option",{value:"time",children:a.vsModeTimeDesc}),e("option",{value:"static",children:a.vsModeStaticDesc})]})]}),c.vsMode==="counter"&&e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.startingCounter}),e("input",{type:"number",value:c.vsCounter,onInput:u=>o({...c,vsCounter:parseInt(u.target.value)||1}),min:"1"})]}),c.vsMode==="static"&&e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.staticVsValue}),e("input",{type:"text",value:c.vsStaticValue,onInput:u=>o({...c,vsStaticValue:u.target.value}),placeholder:a.staticVsValuePlaceholder,required:!0})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.permanentAmountLabel}),e("input",{type:"number",step:"0.01",value:c.permanentAmount,onInput:u=>o({...c,permanentAmount:u.target.value}),placeholder:a.permanentAmountPlaceholder}),e("div",{className:"form-help",children:a.setStandardPrice})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.messageOptional}),e("textarea",{value:c.message,onInput:u=>o({...c,message:u.target.value}),placeholder:a.messageOptionalTextarea,rows:2}),e("div",{className:"form-help",children:a.messageAutoIncluded})]}),e("div",{className:"form-group",children:e("label",{className:"flex items-center gap-sm",children:[e("input",{type:"checkbox",checked:c.isDefault,onChange:u=>o({...c,isDefault:u.target.checked})}),e("span",{className:"form-label",style:{marginBottom:0},children:a.setAsDefaultEvent})]})}),e("div",{className:"flex gap-sm justify-between",children:[e("button",{type:"button",className:"btn btn-secondary",onClick:y,children:a.cancel}),e("button",{type:"submit",className:"btn btn-primary",children:[s?a.update:a.create," ",a.event]})]})]})]})}),d&&e(oe,{message:`${a.deleteEventConfirm} "${d.event.name}"?`,onConfirm:g,onCancel:()=>f(null)})]})}async function Q(){const a=await L("pending"),t=await L("failed");for(const n of a)await O(n);for(const n of t)n.attempts<3&&await O(n)}async function O(a){if(!a.id)throw new Error("Queue item ID is required");try{const t=await fetch(a.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.payload)});if(t.ok)(await t.json().catch(()=>({}))).acknowledged||t.status===200?await U(a.id,"acked"):await U(a.id,"sent");else throw new Error(`HTTP ${t.status}: ${t.statusText}`)}catch(t){const n=t instanceof Error?t.message:"Unknown error";await U(a.id,"failed",n)}}async function He(a){await U(a,"acked")}async function Qe(a=3){const t=await L("failed");for(const n of t)n.attempts<a&&await O(n)}function We(a=3e4){return Q().catch(console.error),window.setInterval(()=>{Q().catch(console.error)},a)}function Ke(a){switch(a.vsMode){case"counter":return a.vsCounter.toString();case"time":const t=new Date,n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),m=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${n}${r}${i}${s}${m}${c}`;case"static":return a.vsStaticValue||"0";default:return"0"}}async function Oe(a,t,n,r){console.log("[PaymentGenerator] Starting payment generation",{accountId:a,eventId:t,amount:n});const i=await ge(a),s=await pe(t);if(console.log("[PaymentGenerator] Fetched account and event",{account:i,event:s}),!i)throw new Error("Account not found");if(!s)throw new Error("Event not found");try{let m=r==null?void 0:r.variableSymbol;m||(m=Ke(s),console.log("[PaymentGenerator] Generated VS:",m),s.vsMode==="counter"&&(s.vsCounter+=1,await ne(s),console.log("[PaymentGenerator] Incremented VS counter to:",s.vsCounter)));const c=(r==null?void 0:r.staticSymbol)||s.staticSymbol;console.log("[PaymentGenerator] Using SS:",c);const o=ce(i.iban);if(console.log("[PaymentGenerator] Formatted IBAN:",o),!o)throw new Error("Invalid IBAN format");const d={acc:o,am:n.toFixed(2),cc:i.currency,xvs:m,xss:c};r!=null&&r.message&&(d.msg=r.message),console.log("[PaymentGenerator] Created payment description:",d);const f=ve(d);console.log("[PaymentGenerator] Generated SPAYD string:",f),console.log("[PaymentGenerator] Generating QR code...");const p=await fe.toDataURL(f,{errorCorrectionLevel:"H",width:512,margin:2});console.log("[PaymentGenerator] QR code generated successfully");const v={accountId:a,eventId:t,amount:n,currency:i.currency,variableSymbol:m,staticSymbol:c,message:r==null?void 0:r.message,spaydString:f,qrCodeDataUrl:p,createdAt:Date.now()};console.log("[PaymentGenerator] Storing payment to IndexedDB",v);const y=await Ne(v);console.log("[PaymentGenerator] Payment stored with ID:",y);const S=await H("webhookUrl");S&&(console.log("[PaymentGenerator] Queuing for sync to webhook:",S),await ye({paymentId:y,webhookUrl:S,payload:{paymentId:y,accountId:a,eventId:t,amount:n,currency:i.currency,variableSymbol:m,staticSymbol:c,message:r==null?void 0:r.message,spaydString:f,createdAt:v.createdAt},status:"pending",attempts:0,createdAt:Date.now()}),await H("immediateSync")&&(console.log("[PaymentGenerator] Immediate sync enabled, processing queue..."),Q().catch(u=>console.error("[PaymentGenerator] Error during immediate sync:",u))));const N={...v,id:y};return console.log("[PaymentGenerator] Payment generation complete",N),N}catch(m){throw console.error("[PaymentGenerator] ERROR during payment generation:",m),console.error("[PaymentGenerator] Error details:",{message:m instanceof Error?m.message:"Unknown error",stack:m instanceof Error?m.stack:void 0}),m}}function ze(){const{t:a}=$(),[t,n]=b([]),[r,i]=b([]),[s,m]=b(null),[c,o]=b(null),[d,f]=b(""),[p,v]=b(""),[y,S]=b(!1),[N,g]=b(null),[u,w]=b(""),[l,I]=b(!1),[C,P]=b(null);k(()=>{_()},[]);async function _(){const h=await Z(),A=await M();n(h),i(A);const T=h.find(K=>K.isDefault)||h[0],q=A.find(K=>K.isDefault)||A[0];T&&m(T.id),q&&o(q.id)}const B=t.find(h=>h.id===s),x=r.find(h=>h.id===c);k(()=>{x!=null&&x.permanentAmount?f(x.permanentAmount.toString()):f(""),x!=null&&x.message?v(x.message):v("")},[x]);async function F(h){if(h.preventDefault(),!s||!c){w(a.pleaseSelectBothAccountAndEvent);return}w(""),S(!0);try{const A=parseFloat(d);if(isNaN(A)||A<=0)throw new Error(a.invalidAmount);const T=await Oe(s,c,A,{message:p||void 0});g(T),await _()}catch(A){w(A instanceof Error?A.message:a.failedToGeneratePayment)}finally{S(!1)}}function W(h){navigator.clipboard.writeText(h),P(a.copiedToClipboard)}if(N)return e("div",{className:"payment-result fade-in",children:[e("div",{className:"result-header",children:[e("h2",{children:a.paymentQrCode}),e("button",{className:"btn btn-secondary btn-sm",onClick:()=>g(null),children:a.backButton})]}),e("div",{className:"result-qr",children:e("img",{src:N.qrCodeDataUrl,alt:"Payment QR Code"})}),e("div",{className:"result-details",children:[e("div",{className:"result-amount",children:[e("div",{className:"amount-value",children:[N.amount," ",N.currency]}),e("div",{className:"amount-label",children:a.amount})]}),e("div",{className:"result-info",children:[e("div",{className:"info-row",children:[e("span",{className:"info-label",children:a.variableSymbol}),e("span",{className:"info-value font-mono",children:N.variableSymbol})]}),e("div",{className:"info-row",children:[e("span",{className:"info-label",children:a.staticSymbolSimple}),e("span",{className:"info-value font-mono",children:N.staticSymbol})]}),N.message&&e("div",{className:"info-row",children:[e("span",{className:"info-label",children:a.message}),e("span",{className:"info-value",children:N.message})]})]}),e("div",{className:"spayd-string-container",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.spaydString}),e("div",{className:"spayd-string",children:[e("button",{className:"copy-button",onClick:()=>W(N.spaydString),children:a.copyToClipboard}),N.spaydString]})]})]}),e("div",{className:"result-actions",children:[e("button",{className:"btn btn-secondary",onClick:()=>{const h=document.createElement("a");h.download=`payment-${N.variableSymbol}.png`,h.href=N.qrCodeDataUrl,h.click()},children:["ðŸ’¾ ",a.download]}),e("button",{className:"btn btn-primary",onClick:()=>g(null),children:a.generateAnother})]})]});const E=(x==null?void 0:x.permanentAmount)!==void 0,G=(x==null?void 0:x.message)!==void 0;return e("div",{className:"payment-form fade-in",children:[e("form",{onSubmit:F,children:[B&&x&&e("div",{className:"selection-summary",children:[e("div",{className:"summary-row",children:[e("span",{className:"summary-icon",children:"ðŸ¦"}),e("div",{className:"summary-content",children:[e("div",{className:"summary-label",children:a.account}),e("div",{className:"summary-value",children:B.name})]})]}),e("div",{className:"summary-row",children:[e("span",{className:"summary-icon",children:"ðŸ“…"}),e("div",{className:"summary-content",children:[e("div",{className:"summary-label",children:a.event}),e("div",{className:"summary-value",children:x.name})]})]}),e("button",{type:"button",className:"change-selection-btn",onClick:()=>I(!l),title:"Change account or event",children:"âš™ï¸"})]}),l&&e("div",{className:"advanced-section fade-in",children:[e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.account}),e("select",{value:s||"",onChange:h=>m(parseInt(h.target.value)),required:!0,children:t.map(h=>e("option",{value:h.id,children:[h.name," - ",le(h.iban)]},h.id))})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:a.event}),e("select",{value:c||"",onChange:h=>o(parseInt(h.target.value)),required:!0,children:r.map(h=>e("option",{value:h.id,children:[h.name," (SS: ",h.staticSymbol,")"]},h.id))})]})]}),e("div",{className:"amount-input-container",children:[e("label",{className:"amount-label",children:[a.amount," (",(B==null?void 0:B.currency)||"CZK",")",E&&e("span",{className:"fixed-badge",children:a.fixed})]}),e("input",{type:"number",step:"0.01",className:"amount-input",value:d,onInput:h=>f(h.target.value),placeholder:"0.00",required:!0,disabled:E,autoFocus:!E})]}),e("div",{className:"message-section",children:e("div",{className:"form-group",children:[e("label",{className:"form-label",children:[a.messageOptional,G&&e("span",{className:"fixed-badge",children:a.fixed})]}),e("input",{type:"text",value:p,onInput:h=>v(h.target.value),placeholder:"e.g., Registration fee",disabled:G})]})}),u&&e("div",{className:"form-error mb-md",children:u}),e("button",{type:"submit",className:"btn btn-primary generate-btn",disabled:y,children:y?e(R,{children:[e("div",{className:"spinner"}),a.generating]}):e(R,{children:[e("span",{className:"btn-icon",children:"ðŸ“±"}),a.generateQrCode]})})]}),C&&e(de,{message:C,onClose:()=>P(null)})]})}function qe(){const{t:a}=$(),[t,n]=b([]),[r,i]=b([]),[s,m]=b([]),[c,o]=b(null),[d,f]=b(null),[p,v]=b(null);k(()=>{y()},[c,d]);async function y(){const l=await Z(),I=await M(),C=await Ae({accountId:c||void 0,eventId:d||void 0});i(l),m(I),n(C)}async function S(l){l.id&&confirm(a.deletePaymentConfirm)&&(await xe(l.id),await y(),(p==null?void 0:p.id)===l.id&&v(null))}function N(l){var I;return((I=r.find(C=>C.id===l))==null?void 0:I.name)||a.unknown}function g(l){var I;return((I=s.find(C=>C.id===l))==null?void 0:I.name)||a.unknown}function u(l){return new Date(l).toLocaleString()}function w(l){navigator.clipboard.writeText(l),alert(a.copiedToClipboard)}return e("div",{className:"fade-in",children:[e("h2",{className:"mb-lg",children:a.paymentHistory}),e("div",{className:"card mb-lg",children:[e("h3",{className:"mb-md",children:a.filters}),e("div",{className:"flex gap-md",children:[e("div",{className:"form-group",style:{flex:1,marginBottom:0},children:[e("label",{className:"form-label",children:a.account}),e("select",{value:c||"",onChange:l=>o(l.target.value?parseInt(l.target.value):null),children:[e("option",{value:"",children:a.allAccounts}),r.map(l=>e("option",{value:l.id,children:l.name},l.id))]})]}),e("div",{className:"form-group",style:{flex:1,marginBottom:0},children:[e("label",{className:"form-label",children:a.event}),e("select",{value:d||"",onChange:l=>f(l.target.value?parseInt(l.target.value):null),children:[e("option",{value:"",children:a.allEvents}),s.map(l=>e("option",{value:l.id,children:l.name},l.id))]})]})]})]}),t.length===0?e("div",{className:"empty-state",children:[e("div",{className:"empty-state-icon",children:"ðŸ“‹"}),e("h3",{children:a.noPaymentsFound}),e("p",{children:a.noPaymentsMessage})]}):e("div",{className:"table-container",children:e("table",{children:[e("thead",{children:e("tr",{children:[e("th",{children:a.date}),e("th",{children:a.account}),e("th",{children:a.event}),e("th",{children:a.amount}),e("th",{children:a.vs}),e("th",{children:a.actions})]})}),e("tbody",{children:t.map(l=>e("tr",{children:[e("td",{className:"text-sm",children:u(l.createdAt)}),e("td",{className:"text-sm",children:N(l.accountId)}),e("td",{className:"text-sm",children:g(l.eventId)}),e("td",{className:"font-semibold",children:[l.amount," ",l.currency]}),e("td",{className:"font-mono text-sm",children:l.variableSymbol}),e("td",{children:e("div",{className:"flex gap-xs",children:[e("button",{className:"btn btn-secondary btn-sm",onClick:()=>v(l),children:a.view}),e("button",{className:"btn btn-danger btn-sm",onClick:()=>S(l),children:a.delete})]})})]},l.id))})]})}),p&&e(ue,{title:a.paymentDetails,onClose:()=>v(null),children:[e("div",{className:"qr-display mb-lg",children:e("img",{src:p.qrCodeDataUrl,alt:"Payment QR Code"})}),e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.date}),e("div",{children:u(p.createdAt)})]}),e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.account}),e("div",{children:N(p.accountId)})]}),e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.event}),e("div",{children:g(p.eventId)})]}),e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.amount}),e("div",{className:"text-xl font-bold",children:[p.amount," ",p.currency]})]}),e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.variableSymbol}),e("div",{className:"font-mono",children:p.variableSymbol})]}),e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.staticSymbolSimple}),e("div",{className:"font-mono",children:p.staticSymbol})]}),p.message&&e("div",{className:"mb-md",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.message}),e("div",{children:p.message})]}),e("div",{className:"mb-lg",children:[e("div",{className:"text-sm text-secondary mb-xs",children:a.spaydString}),e("div",{className:"spayd-string",style:{position:"relative"},children:[e("button",{className:"copy-button",onClick:()=>w(p.spaydString),children:a.copyToClipboard}),p.spaydString]})]}),e("button",{className:"btn btn-secondary",style:{width:"100%"},onClick:()=>{const l=document.createElement("a");l.download=`payment-${p.variableSymbol}.png`,l.href=p.qrCodeDataUrl,l.click()},children:a.downloadQrCode})]})]})}function Ve(){const{t:a}=$(),[t,n]=b([]),[r,i]=b(!1);k(()=>{s();const g=setInterval(s,1e4);return()=>clearInterval(g)},[]);async function s(){const g=await L();n(g)}async function m(){i(!0);try{await Q(),await s()}finally{i(!1)}}async function c(){i(!0);try{await Qe(3),await s()}finally{i(!1)}}async function o(){confirm(a.resetAllFlagsConfirm)&&(await Se({global:!0}),await s())}async function d(g){await He(g),await s()}function f(g){return new Date(g).toLocaleString()}function p(g){switch(g){case"pending":return"badge-pending";case"sent":return"badge-sent";case"acked":return"badge-acked";case"failed":return"badge-failed";default:return""}}function v(g){switch(g){case"pending":return a.pending;case"sent":return a.sent;case"acked":return a.acknowledged;case"failed":return a.failed;default:return g}}const y=t.filter(g=>g.status==="pending").length,S=t.filter(g=>g.status==="failed").length,N=t.filter(g=>g.status==="acked").length;return e("div",{className:"fade-in",children:[e("div",{className:"flex justify-between items-center mb-lg",children:[e("h2",{children:a.syncQueue}),e("div",{className:"flex gap-sm",children:[e("button",{className:"btn btn-secondary",onClick:c,disabled:r||S===0,children:a.retryFailed}),e("button",{className:"btn btn-primary",onClick:m,disabled:r,children:r?e(R,{children:[e("div",{className:"spinner"}),a.processing]}):a.processQueue})]})]}),e("div",{className:"grid grid-3 mb-lg",children:[e("div",{className:"card",children:[e("div",{className:"text-sm text-secondary",children:a.pending}),e("div",{className:"text-2xl font-bold",children:y})]}),e("div",{className:"card",children:[e("div",{className:"text-sm text-secondary",children:a.failed}),e("div",{className:"text-2xl font-bold",style:{color:"var(--color-danger)"},children:S})]}),e("div",{className:"card",children:[e("div",{className:"text-sm text-secondary",children:a.acknowledged}),e("div",{className:"text-2xl font-bold",style:{color:"var(--color-success)"},children:N})]})]}),t.length===0?e("div",{className:"empty-state",children:[e("div",{className:"empty-state-icon",children:"ðŸ“­"}),e("h3",{children:a.noSyncItems}),e("p",{children:a.noSyncItemsMessage})]}):e(R,{children:[e("div",{className:"flex justify-between items-center mb-md",children:[e("h3",{children:[a.queueItemsCount," (",t.length,")"]}),e("button",{className:"btn btn-danger btn-sm",onClick:o,children:a.resetAllFlags})]}),e("div",{className:"table-container",children:e("table",{children:[e("thead",{children:e("tr",{children:[e("th",{children:a.paymentId}),e("th",{children:a.status}),e("th",{children:a.attempts}),e("th",{children:a.created}),e("th",{children:a.lastAttempt}),e("th",{children:a.webhookUrl2}),e("th",{children:a.actions})]})}),e("tbody",{children:t.map(g=>e("tr",{children:[e("td",{className:"font-mono text-sm",children:["#",g.paymentId]}),e("td",{children:e("span",{className:`badge ${p(g.status)}`,children:v(g.status)})}),e("td",{children:g.attempts}),e("td",{className:"text-sm",children:f(g.createdAt)}),e("td",{className:"text-sm",children:g.lastAttempt?f(g.lastAttempt):"-"}),e("td",{className:"text-sm",style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis"},children:g.webhookUrl}),e("td",{children:[g.status==="sent"&&e("button",{className:"btn btn-success btn-sm",onClick:()=>d(g.id),children:a.acknowledge}),g.status==="failed"&&g.error&&e("button",{className:"btn btn-secondary btn-sm",onClick:()=>alert(g.error),children:a.viewError})]})]},g.id))})]})})]})]})}function Ye({onClose:a}){const{t}=$(),[n,r]=b(""),[i,s]=b(!1),[m,c]=b(!0),[o,d]=b("idle");k(()=>{f()},[]);async function f(){try{const v=await H("webhookUrl"),y=await H("immediateSync");r(v||""),s(!!y)}catch(v){console.error("Failed to load settings:",v)}finally{c(!1)}}async function p(v){v.preventDefault(),d("saving");try{await V("webhookUrl",n),await V("immediateSync",i),d("saved"),setTimeout(()=>{a()},1e3)}catch(y){console.error("Failed to save settings:",y),d("error")}}return e(ue,{title:t.globalSettings,onClose:a,children:m?e("div",{className:"p-md text-center",children:t.loading}):e("form",{onSubmit:p,children:[e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.webhookUrl}),e("input",{type:"url",value:n,onInput:v=>r(v.target.value),placeholder:t.webhookUrlPlaceholder,className:"form-input"}),e("div",{className:"form-help",children:t.webhookUrlHelp})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label flex items-center gap-sm cursor-pointer",children:[e("input",{type:"checkbox",checked:i,onChange:v=>s(v.target.checked),className:"form-checkbox"}),t.immediateSync]}),e("div",{className:"form-help",children:t.immediateSyncHelp})]}),o==="saved"&&e("div",{className:"alert alert-success mb-md",children:t.saved}),o==="error"&&e("div",{className:"alert alert-danger mb-md",children:t.failedToSave}),e("div",{className:"flex gap-sm justify-end mt-lg",children:[e("button",{type:"button",className:"btn btn-secondary",onClick:a,children:t.cancel}),e("button",{type:"submit",className:"btn btn-primary",disabled:o==="saving",children:o==="saving"?t.processing:t.save})]})]})})}function je({activeView:a,onNavigate:t}){const{t:n}=$(),[r,i]=b(!1),[s,m]=b(!1),c=[{id:"generate",label:n.tabGenerate,icon:"ðŸ’³"},{id:"accounts",label:n.tabAccounts,icon:"ðŸ¦"},{id:"events",label:n.tabEvents,icon:"ðŸ“…"},{id:"history",label:n.tabHistory,icon:"ðŸ“œ"},{id:"sync",label:n.tabSync,icon:"ðŸ”„"}],o=d=>{t(d),i(!1)};return e(R,{children:[e("button",{className:`hamburger-icon ${r?"open":""}`,onClick:()=>i(!r),"aria-label":"Toggle menu",children:[e("span",{className:`hamburger-line ${r?"open":""}`}),e("span",{className:`hamburger-line ${r?"open":""}`}),e("span",{className:`hamburger-line ${r?"open":""}`})]}),r&&e("div",{className:"menu-overlay",onClick:()=>i(!1)}),e("nav",{className:`slide-menu ${r?"open":""}`,children:[e("ul",{className:"menu-list",children:[c.map(d=>e("li",{children:e("button",{className:`menu-item ${a===d.id?"active":""}`,onClick:()=>o(d.id),children:[e("span",{className:"menu-icon",children:d.icon}),e("span",{className:"menu-label",children:d.label})]})},d.id)),e("li",{children:e("button",{className:"menu-item",onClick:()=>{m(!0),i(!1)},children:[e("span",{className:"menu-icon",children:"âš™ï¸"}),e("span",{className:"menu-label",children:n.settings})]})})]}),e("div",{className:"menu-footer",children:e(Y,{})})]}),e("nav",{className:"desktop-menu",children:[c.map(d=>e("button",{className:`desktop-menu-item ${a===d.id?"active":""}`,onClick:()=>t(d.id),children:[e("span",{className:"menu-icon",children:d.icon}),e("span",{className:"menu-label",children:d.label})]},d.id)),e("button",{className:"desktop-menu-item",onClick:()=>m(!0),children:[e("span",{className:"menu-icon",children:"âš™ï¸"}),e("span",{className:"menu-label",children:n.settings})]}),e("div",{className:"desktop-menu-separator"}),e("div",{className:"desktop-menu-language",children:e(Y,{})})]}),s&&e(Ye,{onClose:()=>m(!1)})]})}function Je({onComplete:a}){const{t,locale:n}=$(),[r,i]=b("choice"),[s,m]=b(""),[c,o]=b(""),[d,f]=b("CZK"),[p,v]=b(""),[y,S]=b(""),[N,g]=b(""),[u,w]=b("counter"),[l,I]=b(""),[C,P]=b(""),[_,B]=b(!1),[x,F]=b(null);async function W(){B(!0);try{await Ie(n),a()}catch(h){F(t.failedToLoadDemoData+(h instanceof Error?h.message:t.unknownError)),B(!1)}}async function E(h){if(h.preventDefault(),v(""),!se(c)){v(t.pleaseEnterValidIban);return}B(!0);try{const A=Date.now();await te({name:s,iban:c.replace(/\s/g,"").toUpperCase(),currency:d,isDefault:!0,createdAt:A,updatedAt:A}),i("event")}catch(A){v(A instanceof Error?A.message:t.failedToCreateAccount)}finally{B(!1)}}async function G(h){if(h.preventDefault(),P(""),!/^\d{1,4}$/.test(N)){P(t.staticSymbolMust1to4);return}B(!0);try{const A=Date.now();await re({name:y,staticSymbol:N,vsMode:u,vsCounter:1,vsStaticValue:u==="static"?"1":void 0,permanentAmount:l?parseFloat(l):void 0,isDefault:!0,createdAt:A,updatedAt:A}),a()}catch(A){P(A instanceof Error?A.message:t.failedToCreateEvent)}finally{B(!1)}}return e("div",{className:"config-wizard",children:[e("div",{className:"wizard-container",children:[e("div",{className:"wizard-header",children:e("h1",{children:t.welcomeToSpayd})}),r==="choice"&&e("div",{className:"wizard-content fade-in",children:[e("p",{className:"wizard-intro",children:t.wizardIntro}),e("div",{className:"choice-container",children:[e("button",{className:"choice-card",onClick:W,disabled:_,type:"button",children:[e("div",{className:"choice-icon",children:"ðŸŽ¯"}),e("h3",{children:t.useDemoData}),e("p",{children:t.useDemoDataDesc})]}),e("button",{className:"choice-card",onClick:()=>i("account"),disabled:_,type:"button",children:[e("div",{className:"choice-icon",children:"âœï¸"}),e("h3",{children:t.createYourOwn}),e("p",{children:t.createYourOwnDesc})]})]})]}),r==="account"&&e("div",{className:"wizard-step fade-in",children:[e("div",{className:"step-icon",children:"ðŸ¦"}),e("h2",{className:"step-title",children:t.createFirstAccount}),e("p",{className:"step-description",children:t.createFirstAccountDesc}),e("form",{onSubmit:E,children:[e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.accountName}),e("input",{type:"text",value:s,onInput:h=>m(h.target.value),placeholder:t.accountNamePlaceholder,required:!0,autoFocus:!0})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.iban}),e("input",{type:"text",value:c,onInput:h=>o(h.target.value),placeholder:t.ibanPlaceholder,required:!0}),e("div",{className:"form-help",children:t.includeSpacesHelp})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.currency}),e("select",{value:d,onChange:h=>f(h.target.value),required:!0,children:[e("option",{value:"CZK",children:t.currencyCzk}),e("option",{value:"EUR",children:t.currencyEur}),e("option",{value:"USD",children:t.currencyUsd}),e("option",{value:"GBP",children:t.currencyGbp})]})]}),p&&e("div",{className:"form-error",children:p}),e("button",{type:"submit",className:"btn btn-primary btn-lg wizard-button",disabled:_,children:_?e(R,{children:[e("div",{className:"spinner"}),t.creating]}):t.continueToEvent})]})]}),r==="event"&&e("div",{className:"wizard-step fade-in",children:[e("div",{className:"step-icon",children:"ðŸ“…"}),e("h2",{className:"step-title",children:t.createFirstEvent}),e("p",{className:"step-description",children:t.createFirstEventDesc}),e("form",{onSubmit:G,children:[e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.eventName}),e("input",{type:"text",value:y,onInput:h=>S(h.target.value),placeholder:t.eventNamePlaceholder,required:!0,autoFocus:!0})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.staticSymbol}),e("input",{type:"text",value:N,onInput:h=>g(h.target.value),placeholder:t.staticSymbolPlaceholder,maxLength:4,required:!0}),e("div",{className:"form-help",children:t.staticSymbolHelp1to4})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.variableSymbolMode}),e("select",{value:u,onChange:h=>w(h.target.value),required:!0,children:[e("option",{value:"counter",children:t.vsModeCounterDesc}),e("option",{value:"time",children:t.vsModeTimeDesc}),e("option",{value:"static",children:t.vsModeStaticDesc})]}),e("div",{className:"form-help",children:t.vsModeHowToGenerate})]}),e("div",{className:"form-group",children:[e("label",{className:"form-label",children:t.defaultAmountOptional}),e("input",{type:"number",step:"0.01",value:l,onInput:h=>I(h.target.value),placeholder:t.permanentAmountPlaceholder}),e("div",{className:"form-help",children:t.setStandardPrice})]}),C&&e("div",{className:"form-error",children:C}),e("div",{className:"wizard-actions",children:[e("button",{type:"button",className:"btn btn-secondary",onClick:()=>i("account"),disabled:_,children:t.back}),e("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:_,children:_?e(R,{children:[e("div",{className:"spinner"}),t.creating]}):t.completeSetup})]})]})]})]}),x&&e(de,{message:x,onClose:()=>F(null)})]})}function Xe(){const{t:a}=$(),[t,n]=b("generate"),[r,i]=b(!1),[s,m]=b(!1);k(()=>{we().then(async()=>{const o=await Z(),d=await M();o.length===0||d.length===0?m(!0):m(!1),i(!0);const f=We(3e4);return()=>{typeof f=="number"&&clearInterval(f)}}).catch(o=>{console.error("Failed to initialize database:",o),alert("Failed to initialize database. Please refresh the page.")})},[]);async function c(){const o=await Z(),d=await M();o.length>0&&d.length>0&&(m(!1),n("generate"))}return r?s?e(Je,{onComplete:c}):e("div",{className:"app-container",children:[e("header",{className:"app-header",children:e("div",{className:"header-content",children:[e("h1",{className:"app-title",children:a.appTitle}),e(je,{activeView:t,onNavigate:o=>n(o)})]})}),e("main",{className:"app-main",children:[t==="generate"&&e(ze,{}),t==="accounts"&&e(Ue,{}),t==="events"&&e(Le,{}),t==="history"&&e(qe,{}),t==="sync"&&e(Ve,{})]}),e("footer",{className:"app-footer",children:e("p",{children:a.footerText})})]}):e("div",{className:"container",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e("div",{style:{textAlign:"center"},children:[e("div",{className:"spinner",style:{width:"3rem",height:"3rem",margin:"0 auto 1rem"}}),e("div",{className:"text-lg",children:a.initializingApp})]})})}Be(e(Ce,{children:e(Xe,{})}),document.getElementById("app"));
